{% extends 'store/base.html' %} 
{% block content %}

<div class="detail-container">
  <div class="detail-image">
    {% if product.image %}
    <img src="{{ product.image.url }}" alt="{{ product.name }}" />
    {% else %}
    <div
      style="
        height: 400px;
        background: #eee;
        display: flex;
        align-items: center;
        justify-content: center;
      "
    >
      No Image
    </div>
    {% endif %}
  </div>

  <div class="detail-info">
    <div class="detail-category">{{ product.category.name }}</div>
    <h1 class="detail-title">{{ product.name }}</h1>
    
    <div style="margin: 10px 0; font-weight: bold; font-size: 1.1rem;">
        {% if product.quantity == 0 %}
             <span style="color: #dc3545;">Out of Stock</span>
        {% elif product.quantity <= 2 %}
             <span style="color: #d9534f;">Only {{ product.quantity }} left!</span>
        {% elif product.quantity <= 4 %}
             <span style="color: #ffc107; text-shadow: 0px 0px 1px #333;">Few in stock</span>
        {% else %}
             <span style="color: #28a745;">In Stock</span>
        {% endif %}
    </div>

    <div class="detail-price">${{ product.price }}</div>

    <div class="detail-description">{{ product.description|linebreaks }}</div>

    {% if product.quantity > 0 %}
        <form action="{% url 'add_to_cart' product.pk %}" method="post">
          {% csrf_token %}
          <button
            type="submit"
            class="btn-view"
            style="
              background-color: var(--brand-navy);
              color: white;
              border: none;
              padding: 15px 30px;
              cursor: pointer;
              font-size: 1rem;
            "
          >
            Add to Cart
          </button>
        </form>
    {% else %}
        <button disabled style="background-color: #ccc; color: white; border: none; padding: 15px 30px; font-size: 1rem; cursor: not-allowed;">
            Sold Out
        </button>
    {% endif %}
  </div>
</div>

{% endblock %}

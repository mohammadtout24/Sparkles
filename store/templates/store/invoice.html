{% extends 'store/base.html' %}
{% block content %}

<style>
    @media print {
        /* 1. Hide the Navigation Bar, Header, and Footer */
        nav, header, footer, .navbar, .header, .footer { 
            display: none !important; 
        }

        /* 2. Hide the buttons (Print / Back to Home) */
        .no-print { 
            display: none !important; 
        }

        /* 3. Make the invoice take up the full page */
        .container { 
            margin: 0 !important; 
            padding: 20px !important; 
            border: none !important; 
            width: 100% !important; 
            max-width: 100% !important; 
            box-shadow: none !important;
        }

        /* 4. Ensure white background */
        body {
            background-color: white !important;
            margin: 0 !important;
        }
    }
</style>
<div class="container" style="margin-top: 4rem; max-width: 600px; background: white; padding: 2rem; border: 1px solid #ddd; border-radius: 8px;">
    
    <div style="text-align: center; margin-bottom: 2rem;">
        <h2 style="color: var(--brand-navy);">Order Confirmed!</h2>
        <p style="font-size: 1.2rem; font-weight: bold;">Order #{{ order_id }}</p>
        <p>Thank you for your purchase, {{ name }}.</p>
    </div>

    <div style="border-bottom: 2px solid #eee; padding-bottom: 1rem; margin-bottom: 1rem;">
        <h3 class="section-title" style="font-size: 1.2rem; margin-bottom: 0.5rem;">Customer Details</h3>
        <p><strong>Phone:</strong> {{ phone }}</p>
        <p><strong>Address:</strong> {{ address }}, {{ city }}</p>
        <p><strong>Region:</strong> {{ region_display }}</p>
    </div>

    <div style="margin-bottom: 2rem;">
        <h3 class="section-title" style="font-size: 1.2rem;">Order Summary</h3>
        <table style="width: 100%; border-collapse: collapse;">
            {% for item in items_summary %}
            <tr style="border-bottom: 1px solid #f9f9f9;">
                <td style="padding: 8px 0;">{{ item.qty }}x {{ item.name }}</td>
                <td style="text-align: right;">${{ item.total|floatformat:2 }}</td>
            </tr>
            {% endfor %}
            
            <tr style="border-top: 2px solid #ddd;">
                <td style="padding-top: 10px;">Subtotal</td>
                <td style="text-align: right; padding-top: 10px;">${{ subtotal|floatformat:2 }}</td>
            </tr>
            <tr>
                <td style="padding-bottom: 10px;">Delivery Charge</td>
                <td style="text-align: right; padding-bottom: 10px;">+ ${{ delivery_fee|floatformat:2 }}</td>
            </tr>
            <tr style="font-weight: bold; font-size: 1.2rem; color: var(--brand-navy);">
                <td style="padding-top: 10px; border-top: 1px solid #333;">TOTAL</td>
                <td style="text-align: right; padding-top: 10px; border-top: 1px solid #333;">${{ final_total|floatformat:2 }}</td>
            </tr>
        </table>
    </div>

    <div class="no-print" style="text-align: center;">
        <button onclick="window.print()" class="btn-view" style="background: #333; color: white; cursor: pointer; border: none; padding: 10px 20px; border-radius: 4px;">Print Facture</button>
        <a href="{% url 'home' %}" class="btn-view" style="margin-left: 10px; text-decoration: none; background: var(--brand-navy); color: white; padding: 10px 20px; border-radius: 4px;">Continue Shopping</a>
    </div>

</div>

{% endblock %}

